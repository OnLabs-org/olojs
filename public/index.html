<html>

    <head>
        
        <script src="/environment-http-client.js"></script>
        <link rel="stylesheet" href="/main.css"></link>
        
        <style>
        
            html, body {
                margin: 0;
                padding: 0;
                border: 0;
                height: 100%;
            }
            
            main {
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;
                padding: 8px 2em;
            }
                        
        </style>
    </head>

    <body>
        
        <main>
            <p>Loading ...</p>
        </main>
        
        <script>
        
            async function load (hash) {
                const [docPath, argns] = olonv.parseURI(hash.slice(1));
                const doc = await olonv.loadDocument(docPath);
                const namespace = await doc.evaluate({argns});
                const html = await olonv.renderNamespace(namespace);
                document.querySelector("main").innerHTML = html;            
            }
            
            document.addEventListener("DOMContentLoaded", async () => {
                window.addEventListener("hashchange", async (event) => {
                    await load(location.hash);
                });
                await load(location.hash);
            });
        </script>
        
    </body>

</html>
